<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ConversationalInput Demo - Mistral Cloud</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/lucide-react@latest/dist/umd/lucide-react.js"></script>
    <script src="https://unpkg.com/@junniepat/conversational-ai-input@latest/dist/index.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState } = React;
        const { ConversationalInput } = window.ConversationalAIInput;
        const { MessageSquare, Mic, Upload, Zap, CheckCircle, AlertCircle, Star, Code, Play } = window.LucideReact;

        function MistralDemo() {
            const [aiResult, setAiResult] = useState(null);
            const [aiError, setAiError] = useState(null);
            const [inputText, setInputText] = useState('');
            const [activeDemo, setActiveDemo] = useState('basic');

            // API Key Input - Enter your Mistral Cloud API key here
            const [apiKey, setApiKey] = useState('');
            const [isConfigured, setIsConfigured] = useState(false);

            const demos = {
                basic: {
                    title: "Basic AI Processing",
                    description: "Simple text processing with Mistral Cloud",
                    config: {
                        provider: 'mistral',
                        apiKey: apiKey,
                        model: 'mistral-large-latest',
                        extractStructuredData: false,
                        clarificationMode: false,
                        onAIResponse: (response) => {
                            setAiResult(response);
                            setAiError(null);
                        },
                        onAIError: (error) => {
                            setAiError(error);
                            setAiResult(null);
                        }
                    }
                },
                custom: {
                    title: "HR Assistant",
                    description: "Professional HR assistant with custom prompts",
                    config: {
                        provider: 'mistral',
                        apiKey: apiKey,
                        model: 'mistral-large-latest',
                        systemPrompt: `You are a professional HR assistant specializing in candidate evaluation and recruitment.

Your expertise includes:
- Analyzing job applications and resumes
- Identifying key skills and qualifications
- Providing structured feedback
- Making hiring recommendations
- Ensuring fair and unbiased evaluation

Guidelines:
- Be professional and objective in your analysis
- Focus on relevant skills and experience
- Identify both strengths and areas for improvement
- Provide actionable insights for hiring decisions
- Always maintain confidentiality and respect`,
                        extractStructuredData: true,
                        schema: {
                            "candidate_name": "Full name of the candidate",
                            "relevant_experience": "Years of relevant work experience",
                            "key_skills": "List of key technical and soft skills mentioned",
                            "education": "Educational background and qualifications",
                            "strengths": "Notable strengths and positive attributes",
                            "concerns": "Any potential concerns or gaps",
                            "overall_rating": "Overall rating from 1-10",
                            "recommendation": "Hire/No Hire/Interview recommendation with reasoning"
                        },
                        onAIResponse: (response) => {
                            setAiResult(response);
                            setAiError(null);
                        },
                        onAIError: (error) => {
                            setAiError(error);
                            setAiResult(null);
                        }
                    }
                },
                advanced: {
                    title: "Advanced Analysis",
                    description: "Dynamic prompt generation with file analysis",
                    config: {
                        provider: 'mistral',
                        apiKey: apiKey,
                        model: 'mistral-large-latest',
                        customPromptBuilder: (text, files, options) => {
                            const hasResume = files?.some(f => 
                                f.name.toLowerCase().includes('resume') || 
                                f.name.toLowerCase().includes('cv')
                            );
                            
                            const systemPrompt = `You are an expert HR recruiter with 15+ years of experience in talent acquisition.

Current Analysis Context:
${hasResume ? 'âœ… Resume/CV has been provided for detailed analysis' : 'âŒ No resume/CV was provided - analysis will be based on text input only'}

Provide detailed, actionable insights for hiring decisions.`;

                            const userPrompt = `ðŸŽ¯ CANDIDATE APPLICATION ANALYSIS REQUEST

ðŸ“‹ Application Details:
${text}

${files && files.length > 0 ? `ðŸ“Ž Supporting Documents:
${files.map(f => `- ${f.name} (${(f.size / 1024).toFixed(1)}KB)`).join('\n')}` : 'ðŸ“Ž No supporting documents provided'}

Please provide:
1. Professional summary
2. Key qualifications assessment
3. Technical skills evaluation
4. Cultural fit indicators
5. Overall recommendation with rating (1-10)

Format as structured JSON with clear sections.`;

                            return { systemPrompt, userPrompt };
                        },
                        extractStructuredData: true,
                        onAIResponse: (response) => {
                            setAiResult(response);
                            setAiError(null);
                        },
                        onAIError: (error) => {
                            setAiError(error);
                            setAiResult(null);
                        }
                    }
                }
            };

            const handleSubmit = async (text, files) => {
                console.log('Form submitted:', text, files);
            };

            const currentDemo = demos[activeDemo];

            return (
                <div className="min-h-screen bg-gradient-to-br from-slate-50 via-white to-blue-50">
                    {/* Header */}
                    <div className="bg-white shadow-sm border-b">
                        <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6">
                            <div className="text-center">
                                <h1 className="text-4xl font-bold text-gray-900 mb-4 flex items-center justify-center gap-3">
                                    <span className="text-purple-600">âœ¨</span>
                                    ConversationalInput Live Demo
                                </h1>
                                <p className="text-xl text-gray-600 mb-6">
                                    Test the power of conversational AI input with Mistral Cloud
                                </p>
                                <div className="flex items-center justify-center gap-2 text-sm text-gray-500">
                                    <span>ðŸ¤–</span>
                                    Powered by Mistral Cloud AI
                                </div>
                            </div>
                        </div>
                    </div>

                    <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
                        {/* Demo Selection */}
                        <div className="mb-8">
                            <h2 className="text-2xl font-semibold text-gray-900 mb-4">Choose a Demo</h2>
                            <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
                                {Object.entries(demos).map(([key, demo]) => (
                                    <button
                                        key={key}
                                        onClick={() => setActiveDemo(key)}
                                        className={`p-6 rounded-lg border-2 transition-all duration-200 text-left ${
                                            activeDemo === key
                                                ? 'border-purple-500 bg-purple-50 shadow-md'
                                                : 'border-gray-200 bg-white hover:border-gray-300 hover:shadow-sm'
                                        }`}
                                    >
                                        <h3 className="text-lg font-semibold text-gray-900 mb-2">{demo.title}</h3>
                                        <p className="text-sm text-gray-600">{demo.description}</p>
                                        {activeDemo === key && (
                                            <div className="mt-3 flex items-center text-purple-600">
                                                <CheckCircle className="w-4 h-4 mr-1" />
                                                <span className="text-sm font-medium">Active</span>
                                            </div>
                                        )}
                                    </button>
                                ))}
                            </div>
                        </div>

                        {/* API Key Configuration */}
                        <div className="mb-8">
                            <div className="bg-white rounded-xl shadow-lg p-6">
                                <h2 className="text-2xl font-semibold text-gray-900 mb-4 flex items-center gap-2">
                                    <span className="text-blue-600">ðŸ”‘</span>
                                    API Configuration
                                </h2>
                                <p className="text-gray-600 mb-4">
                                    Enter your Mistral Cloud API key to test the component. 
                                    <a href="https://console.mistral.ai/" target="_blank" rel="noopener noreferrer" className="text-blue-600 hover:text-blue-800 ml-1">
                                        Get your API key here
                                    </a>
                                </p>
                                
                                {!isConfigured ? (
                                    <div className="space-y-4">
                                        <div>
                                            <label className="block text-sm font-medium text-gray-700 mb-2">
                                                Mistral Cloud API Key
                                            </label>
                                            <input
                                                type="password"
                                                value={apiKey}
                                                onChange={(e) => setApiKey(e.target.value)}
                                                placeholder="Enter your Mistral Cloud API key..."
                                                className="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                            />
                                        </div>
                                        <button
                                            onClick={() => {
                                                if (apiKey.trim()) {
                                                    setIsConfigured(true);
                                                } else {
                                                    alert('Please enter a valid API key');
                                                }
                                            }}
                                            className="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors"
                                        >
                                            Configure API Key
                                        </button>
                                    </div>
                                ) : (
                                    <div className="flex items-center justify-between p-4 bg-green-50 border border-green-200 rounded-lg">
                                        <div className="flex items-center gap-2">
                                            <CheckCircle className="w-5 h-5 text-green-600" />
                                            <span className="text-green-800 font-medium">API Key Configured</span>
                                        </div>
                                        <button
                                            onClick={() => {
                                                setApiKey('');
                                                setIsConfigured(false);
                                            }}
                                            className="text-sm text-gray-600 hover:text-gray-800"
                                        >
                                            Change Key
                                        </button>
                                    </div>
                                )}
                            </div>
                        </div>

                        {/* Demo Content */}
                        {isConfigured && (
                            <div className="grid grid-cols-1 lg:grid-cols-2 gap-8">
                            {/* Input Section */}
                            <div className="bg-white rounded-xl shadow-lg p-6">
                                <h2 className="text-2xl font-semibold text-gray-900 mb-4 flex items-center gap-2">
                                    <MessageSquare className="w-6 h-6 text-green-600" />
                                    {currentDemo.title}
                                </h2>
                                <p className="text-gray-600 mb-4">{currentDemo.description}</p>

                                <ConversationalInput
                                    onSubmit={handleSubmit}
                                    placeholder="Try typing something like: 'I'm a software engineer with 5 years of experience in React and Node.js, looking for a senior developer position...'"
                                    aiProcessing={currentDemo.config}
                                    value={inputText}
                                    onTextChange={setInputText}
                                    showClearButton={true}
                                    enableFileUpload={true}
                                    acceptedFileTypes={['.pdf', '.doc', '.docx', '.txt']}
                                    maxFileSize={10 * 1024 * 1024}
                                    classNames={{
                                        container: "border border-gray-300 rounded-lg shadow-sm",
                                        textarea: "min-h-[150px] p-4 text-base",
                                        actionBar: "bg-gray-100 p-3 flex justify-between items-center border-t border-gray-200",
                                        voiceButton: "bg-blue-600 text-white hover:bg-blue-700",
                                        fileButton: "bg-green-600 text-white hover:bg-green-700",
                                        submitButton: "bg-purple-600 text-white hover:bg-purple-700",
                                        clearButton: "bg-red-500 text-white hover:bg-red-600",
                                        fileDisplay: "p-2 bg-white border-t border-gray-200",
                                        errorDisplay: "p-3 bg-red-100 text-red-800 rounded-b-lg"
                                    }}
                                />

                                {/* Sample Inputs */}
                                <div className="mt-6">
                                    <h3 className="text-sm font-medium text-gray-700 mb-2">Try these sample inputs:</h3>
                                    <div className="space-y-2">
                                        {[
                                            "I'm a marketing manager with 8 years of experience in digital marketing, SEO, and social media management.",
                                            "Software developer specializing in Python, Django, and machine learning. I have a Master's in Computer Science.",
                                            "Customer service representative with excellent communication skills and 3 years of experience in retail."
                                        ].map((sample, index) => (
                                            <button
                                                key={index}
                                                onClick={() => setInputText(sample)}
                                                className="block w-full text-left p-2 text-sm text-gray-600 hover:text-gray-900 hover:bg-gray-50 rounded border border-gray-200"
                                            >
                                                {sample}
                                            </button>
                                        ))}
                                    </div>
                                </div>
                            </div>

                            {/* Results Section */}
                            <div className="space-y-6">
                                {/* AI Response */}
                                {aiResult && (
                                    <div className="bg-white rounded-xl shadow-lg p-6">
                                        <h3 className="text-xl font-semibold text-green-800 mb-3 flex items-center gap-2">
                                            <CheckCircle className="w-5 h-5" />
                                            AI Response
                                        </h3>
                                        <div className="bg-green-50 border border-green-200 rounded-lg p-4">
                                            <pre className="text-sm text-green-900 whitespace-pre-wrap overflow-auto max-h-96">
                                                {typeof aiResult === 'string' ? aiResult : JSON.stringify(aiResult, null, 2)}
                                            </pre>
                                        </div>
                                    </div>
                                )}

                                {/* Error Display */}
                                {aiError && (
                                    <div className="bg-white rounded-xl shadow-lg p-6">
                                        <h3 className="text-xl font-semibold text-red-800 mb-3 flex items-center gap-2">
                                            <AlertCircle className="w-5 h-5" />
                                            Error
                                        </h3>
                                        <div className="bg-red-50 border border-red-200 rounded-lg p-4">
                                            <p className="text-red-700">{aiError}</p>
                                        </div>
                                    </div>
                                )}

                                {/* Features Showcase */}
                                <div className="bg-white rounded-xl shadow-lg p-6">
                                    <h3 className="text-xl font-semibold text-gray-900 mb-4 flex items-center gap-2">
                                        <Star className="w-5 h-5 text-yellow-500" />
                                        Component Features
                                    </h3>
                                    <div className="grid grid-cols-1 sm:grid-cols-2 gap-4">
                                        <div className="flex items-center gap-3">
                                            <Mic className="w-5 h-5 text-blue-600" />
                                            <span className="text-sm text-gray-700">Voice Input</span>
                                        </div>
                                        <div className="flex items-center gap-3">
                                            <Upload className="w-5 h-5 text-green-600" />
                                            <span className="text-sm text-gray-700">File Upload</span>
                                        </div>
                                        <div className="flex items-center gap-3">
                                            <Zap className="w-5 h-5 text-purple-600" />
                                            <span className="text-sm text-gray-700">AI Processing</span>
                                        </div>
                                        <div className="flex items-center gap-3">
                                            <span className="text-sm text-gray-700">Custom Prompts</span>
                                        </div>
                                    </div>
                                </div>

                                {/* Installation Instructions */}
                                <div className="bg-white rounded-xl shadow-lg p-6">
                                    <h3 className="text-xl font-semibold text-gray-900 mb-4 flex items-center gap-2">
                                        <Code className="w-5 h-5 text-gray-600" />
                                        Install & Use
                                    </h3>
                                    <div className="bg-gray-900 rounded-lg p-4 overflow-auto">
                                        <pre className="text-sm text-green-400">
{`npm install @junniepat/conversational-ai-input

import { ConversationalInput } from '@junniepat/conversational-ai-input';

<ConversationalInput
  onSubmit={handleSubmit}
  aiProcessing={{
    provider: 'mistral',
    apiKey: 'your-mistral-api-key',
    model: 'mistral-large-latest',
    systemPrompt: 'You are a professional HR assistant...',
    extractStructuredData: true
  }}
  placeholder="Tell me about yourself..."
  enableFileUpload={true}
  enableVoice={true}
/>`}
                                        </pre>
                                    </div>
                                </div>
                            </div>
                        </div>
                        )}
                    </div>
                </div>
            );
        }

        ReactDOM.render(<MistralDemo />, document.getElementById('root'));
    </script>
</body>
</html>
